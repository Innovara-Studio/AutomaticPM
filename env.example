# PM-AI 糖腎共病衛教照護系統 - 環境變數範本
# 複製此檔案為 .env 並根據實際環境調整設定值

# =============================================================================
# 基本設定
# =============================================================================
ENVIRONMENT=development
DEBUG=true
LOG_LEVEL=DEBUG
SECRET_KEY=your-secret-key-here-change-in-production
API_VERSION=v1

# =============================================================================
# 資料庫設定
# =============================================================================
# PostgreSQL 主資料庫
DATABASE_URL=postgresql://postgres:dev_password@localhost:5432/pm_ai
DATABASE_HOST=localhost
DATABASE_PORT=5432
DATABASE_NAME=pm_ai
DATABASE_USER=postgres
DATABASE_PASSWORD=dev_password

# 資料庫連線池設定
DATABASE_POOL_SIZE=10
DATABASE_MAX_OVERFLOW=20
DATABASE_POOL_TIMEOUT=30
DATABASE_POOL_RECYCLE=3600

# =============================================================================
# 快取設定
# =============================================================================
# Redis 快取
REDIS_URL=redis://localhost:6379/0
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# 快取設定
CACHE_TTL=3600
SESSION_TTL=86400

# =============================================================================
# 向量資料庫設定
# =============================================================================
# Qdrant 向量資料庫
VECTORDB_URL=http://localhost:6333
VECTORDB_HOST=localhost
VECTORDB_PORT=6333
VECTORDB_API_KEY=
VECTORDB_COLLECTION_NAME=pm_ai_documents

# 向量設定
EMBEDDING_DIMENSION=384
EMBEDDING_MODEL=sentence-transformers/all-MiniLM-L6-v2
CHUNK_SIZE=512
CHUNK_OVERLAP=50

# =============================================================================
# 物件儲存設定
# =============================================================================
# MinIO 物件儲存
MINIO_ENDPOINT=localhost:9000
MINIO_ACCESS_KEY=dev_user
MINIO_SECRET_KEY=dev_password
MINIO_BUCKET_DOCUMENTS=pm-ai-documents
MINIO_BUCKET_REPORTS=pm-ai-reports
MINIO_BUCKET_BACKUPS=pm-ai-backups
MINIO_USE_SSL=false

# AWS S3 (生產環境使用)
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_REGION=ap-northeast-1
S3_BUCKET_NAME=

# =============================================================================
# LLM 服務設定
# =============================================================================
# OpenAI 相容 API
OPENAI_BASE_URL=http://localhost:8001/v1
OPENAI_API_KEY=sk-local
OPENAI_MODEL=medgemma-7b

# 本地 LLM 設定
LLM_GATEWAY_URL=http://localhost:8001
LLM_MODEL_NAME=medgemma-7b
LLM_MODEL_PATH=/models
LLM_MAX_TOKENS=2048
LLM_TEMPERATURE=0.7
LLM_TOP_P=0.9
LLM_FREQUENCY_PENALTY=0.0
LLM_PRESENCE_PENALTY=0.0

# 備用 LLM 服務
BACKUP_LLM_BASE_URL=https://api.openai.com/v1
BACKUP_LLM_API_KEY=your-openai-api-key
BACKUP_LLM_MODEL=gpt-3.5-turbo

# =============================================================================
# 身份驗證與授權
# =============================================================================
# OIDC/OAuth2 設定
OIDC_ISSUER_URL=https://idp.example.com
OIDC_CLIENT_ID=pm-ai
OIDC_CLIENT_SECRET=your-client-secret
OIDC_REDIRECT_URI=http://localhost:3000/auth/callback
OIDC_SCOPES=openid profile email

# JWT 設定
JWT_SECRET_KEY=your-jwt-secret-key
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7

# 權限設定
ADMIN_EMAILS=admin@example.com,pm@example.com
DEFAULT_USER_ROLE=user

# =============================================================================
# 外部服務整合
# =============================================================================
# FHIR 服務
FHIR_BASE_URL=https://fhir.example.com
FHIR_CLIENT_ID=pm-ai-fhir
FHIR_CLIENT_SECRET=your-fhir-secret
FHIR_SCOPE=launch/patient offline_access openid fhirUser

# EMR 系統整合
EMR_API_URL=https://emr.example.com/api
EMR_API_KEY=your-emr-api-key
EMR_TIMEOUT=30

# 通知服務
NOTIFICATION_WEBHOOK_URL=http://localhost:8000/api/notifications
SLACK_WEBHOOK_URL=
EMAIL_SMTP_HOST=
EMAIL_SMTP_PORT=587
EMAIL_SMTP_USER=
EMAIL_SMTP_PASSWORD=
EMAIL_FROM=noreply@pm-ai.com

# =============================================================================
# 監控與日誌
# =============================================================================
# Prometheus 監控
PROMETHEUS_ENABLED=true
PROMETHEUS_PORT=9090
METRICS_ENABLED=true

# 日誌設定
LOG_FORMAT=json
LOG_FILE_PATH=/var/log/pm-ai
LOG_ROTATION_SIZE=100MB
LOG_RETENTION_DAYS=30

# 審計日誌
AUDIT_LOG_ENABLED=true
AUDIT_LOG_LEVEL=INFO
AUDIT_RETENTION_DAYS=90

# =============================================================================
# 安全設定
# =============================================================================
# CORS 設定
CORS_ORIGINS=http://localhost:3000,http://localhost:3001
CORS_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_HEADERS=Content-Type,Authorization,X-Requested-With

# 速率限制
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_WINDOW=60

# 加密設定
ENCRYPTION_KEY=your-encryption-key-32-chars
HASH_ALGORITHM=sha256
HASH_SALT_ROUNDS=12

# =============================================================================
# 效能設定
# =============================================================================
# 工作進程設定
WORKERS=4
WORKER_CLASS=uvicorn.workers.UvicornWorker
WORKER_CONNECTIONS=1000

# 連線超時設定
CONNECT_TIMEOUT=30
READ_TIMEOUT=60
WRITE_TIMEOUT=60

# 快取設定
CACHE_ENABLED=true
CACHE_BACKEND=redis
CACHE_DEFAULT_TTL=3600

# =============================================================================
# 開發工具設定
# =============================================================================
# 開發模式設定
DEV_MODE=true
HOT_RELOAD=true
DEBUG_TOOLBAR=true

# 測試設定
TEST_DATABASE_URL=postgresql://postgres:test_password@localhost:5432/pm_ai_test
TEST_REDIS_URL=redis://localhost:6379/1

# 模擬資料
MOCK_DATA_ENABLED=true
MOCK_LLM_RESPONSES=true

# =============================================================================
# 部署設定
# =============================================================================
# 容器設定
CONTAINER_NAME=pm-ai
CONTAINER_VERSION=latest
HEALTH_CHECK_INTERVAL=30
HEALTH_CHECK_TIMEOUT=10
HEALTH_CHECK_RETRIES=3

# 負載平衡
LOAD_BALANCER_ENABLED=false
LOAD_BALANCER_ALGORITHM=round_robin

# 備份設定
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
BACKUP_STORAGE_PATH=/backups

# =============================================================================
# 功能開關
# =============================================================================
# 功能標誌
FEATURE_QA_BOT=true
FEATURE_REPORT_GENERATION=true
FEATURE_KPI_TRACKING=true
FEATURE_CHANGE_CONTROL=true
FEATURE_FHIR_INTEGRATION=false
FEATURE_VOICE_INPUT=false
FEATURE_MULTI_LANGUAGE=false

# 實驗性功能
EXPERIMENTAL_FEATURES=false
BETA_FEATURES=false

# =============================================================================
# 本地化設定
# =============================================================================
# 語言與地區
DEFAULT_LANGUAGE=zh-TW
SUPPORTED_LANGUAGES=zh-TW,en-US
TIMEZONE=Asia/Taipei
DATE_FORMAT=%Y-%m-%d
DATETIME_FORMAT=%Y-%m-%d %H:%M:%S

# 醫療用語設定
MEDICAL_TERMINOLOGY_LOCALE=zh-TW
USE_TRADITIONAL_CHINESE=true
MEDICAL_DICTIONARY_PATH=/data/medical-dict

# =============================================================================
# 合規設定
# =============================================================================
# 資料保護
DATA_RETENTION_DAYS=2555  # 7年
PHI_ENCRYPTION_ENABLED=true
PSEUDONYMIZATION_ENABLED=true
AUDIT_TRAIL_ENABLED=true

# 合規標準
HIPAA_COMPLIANCE=true
GDPR_COMPLIANCE=false
TW_PDPA_COMPLIANCE=true

# 資料分類
DATA_CLASSIFICATION_ENABLED=true
SENSITIVE_DATA_DETECTION=true
AUTO_REDACTION_ENABLED=true
